<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Inicio</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css">
</head>
<body>
    <div th:replace="~{fragments/header :: header}"></div>
    <div th:replace="~{fragments/navbar :: navbar}"></div>
    <div class = "welcome-container">
        <p>Portal Pago</p>
        <p>NIC Chile</p>
    </div>
    
    
    <div class="form-container">
        <div class = "Form-title">
            Formulario Factura Exenta Eletronica
        </div>
        <form action="/guardarDatos" method="post">
            <div class="div-col">
                <div class="col-1">
                    <label for="name-input">Nombre</label>
                    <input id="name-input" name="name-input" type="text" maxlength="50" required>

                    <label for="rut-input">Rut</label>
                    <input id="rut-input" name="rut-input" type="text" maxlength="50" required>

                    <label for="dir-input">DirecciÃ³n</label>
                    <input id="dir-input" name="dir-input" type="text" maxlength="50" required>

                    <label for="comuna-input">Comuna</label>
                    <input id="comuna-input" name="comuna-input" type="text" maxlength="50" required>

                    <label for="ciudad-input">Ciudad</label>
                    <input id="ciudad-input" name="ciudad-input" type="text" maxlength="50" required>

                    <label for="telefono-input">Telefono</label>
                    <input id="telefono-input" name="telefono-input" type="text" maxlength="50" required>

                    <label for="guia-input">Guia despacho</label>
                    <input id="guia-input" name="guia-input" type="text" maxlength="50" required>
                </div>
            
                <div class="col-2">
                    <label for="giro-input">Giro</label>
                    <input id="giro-input" name="giro-input" type="text" maxlength="50" required>

                    <label for="emit-input">Emitida por</label>
                    <input id="emit-input" name="emit-input" type="text" maxlength="50" required>

                    <label for="CDC-input">Centro de costo</label>
                    <input id="CDC-input" name="CDC-input" type="text" maxlength="50" required>

                    <label for="CDV-input">Condiciones de venta DE</label>
                    <input id="CDV-input" name="CDV-input" type="text" maxlength="50" required>

                    <label for="item-input">Item</label>
                    <input id="item-input" name="item-input" type="text" maxlength="50" required>

                    <label for="DE-input">DE</label>
                    <input id="DE-input" name="DE-input" type="text" maxlength="50" required>

                    <label for="venc-input">Vencimiento</label>
                    <input id="venc-input" name="venc-input" type="text" maxlength="50" required>
                </div>
                
                <div class="col-3">
                    <label for="cant-input">Cantidad</label>
                    <input id="cant-input" name="cant-input" type="number" maxlength="50" required>

                    <label for="tipo-input">Tipo Documento</label>
                    <select id="tipo-input" name="tipo-input" required>
                        <option>34</option>
                    </select>

                    <label for="detalle-input">Detalle</label>
                    <input id="detalle-input" name="detalle-input" type="text" maxlength="50" required>

                    <label for="desc-input">DescripciÃ³n</label>
                    <input id="desc-input" name="desc-input" type="text" maxlength="50" required>

                    <label for="precioU-input">Precio Unitario</label>
                    <input id="precioU-input" name="precioU-input" type="number" maxlength="50" required>

                    <span class="total-label">Total:</span>
                    <span class="total-value" id="total-final" data-value="0">$0</span>
                </div>
            </div>
            <button type="submit">Enviar</button>  
        </form>
        <div class = "autofill-div">
            <button type="button" class="autofill-btn" onclick="autoFillForm()">ðŸ”„ Llenar Datos de Demo</button>
        </div>
    </div>


    <script>
        function autoFillForm() {
            // Datos de ejemplo para la demo
            const datosDemo = {
                'name-input': 'Empresa Demo SpA',
                'rut-input': '76.123.456-7',
                'dir-input': 'Av. Libertador Bernardo O\'Higgins 1234',
                'comuna-input': 'Santiago Centro',
                'ciudad-input': 'Santiago',
                'telefono-input': '+56 2 2345 6789',
                'guia-input': 'GD-2024-001234',
                'giro-input': 'Comercio al por mayor',
                'emit-input': 'Juan PÃ©rez GonzÃ¡lez',
                'CDC-input': '1966',
                'CDV-input': 'Contado',
                'item-input': '6.1.01.03.01 (2152)',
                'DE-input': 'Bodega Central',
                'venc-input': '31/12/2025',
                'cant-input': '1',
                'tipo-input': '34',
                'detalle-input': 'Producto de demostraciÃ³n',
                'desc-input': 'ArtÃ­culo para pruebas del sistema',
                'precioU-input': '9990'
            };

            // Llenar cada campo
            for (let id in datosDemo) {
                const campo = document.getElementById(id);
                if (campo) {
                    campo.value = datosDemo[id];
                }
            }
            const precioUnitario = parseFloat(datosDemo['precioU-input']);
            const cantidad = parseFloat(datosDemo['cant-input']);
            const total = precioUnitario * cantidad;
            actualizarTotal(total)

            // PequeÃ±a animaciÃ³n visual para confirmar
            const btn = document.querySelector('.autofill-btn');
            btn.textContent = 'âœ“ Datos cargados!';
            btn.style.backgroundColor = '#2196F3';
            
            setTimeout(() => {
                btn.textContent = 'ðŸ”„ Llenar Datos de Demo';
                btn.style.backgroundColor = '#4CAF50';
            }, 2000);
        }
    </script>
    <script>
        function actualizarTotal(nuevoValor) {
            const spanTotal = document.getElementById('total-final');
            spanTotal.setAttribute('data-value', nuevoValor);
            spanTotal.textContent = `$${nuevoValor.toLocaleString('es-CL')}`;
        }
    </script>
</body>
</html>